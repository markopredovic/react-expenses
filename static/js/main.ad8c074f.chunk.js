(this["webpackJsonpreact-expenses"]=this["webpackJsonpreact-expenses"]||[]).push([[0],{120:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"getList",(function(){return T})),n.d(a,"add",(function(){return X})),n.d(a,"remove",(function(){return M})),n.d(a,"filter",(function(){return J}));var r=n(0),l=n.n(r),c=n(30),o=n.n(c),u=(n(67),n(28)),s=n(16),i=(n(68),Object(r.createContext)({expenses:[],list:function(){},add:function(){}})),m=n(29),p=n(25),E=n(57);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(n,!0).forEach((function(t){Object(E.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var f={expenses:[],month:-1,year:(new Date).getFullYear(),lang:"sr"},g=function(e,t){return v({},e,{expenses:[].concat(Object(p.a)(e.expenses),Object(p.a)(t.payload)),month:-1,year:(new Date).getFullYear()})},y=function(e,t){return v({},e,{expenses:[].concat(Object(p.a)(e.expenses),[t])})},x=function(e,t){return console.log("[FILTER]",t),v({},e,{month:t.filter.month,year:t.filter.year})},b=function(e,t){var n=e.expenses.filter((function(e){return e.id!==t}));return v({},e,{expenses:n})},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LIST_ALL_EXPENSES":return g(e,t);case"ADD_EXPENSE":return y(e,t.payload);case"FILTER_EXPENSES":return x(e,t.payload);case"REMOVE_EXPENSE":return b(e,t.payload);case"CHANGE_LANG":return v({},e,{lang:t.payload});default:return console.log(e),e}},O=function(e){console.log("[USE EXPENSES]");var t=Object(r.useReducer)(h),n=Object(m.a)(t,2),a=n[0],l=n[1];Object(r.useEffect)((function(){c()}),[]);var c=function(){var t=e.getList();t&&l({type:"LIST_ALL_EXPENSES",payload:t})};return{state:a,add:function(t){try{e.add(t)}catch(n){}l({type:"ADD_EXPENSE",payload:t})},filter:function(e){l({type:"FILTER_EXPENSES",payload:{filter:e}})},remove:function(t){e.remove(t),l({type:"REMOVE_EXPENSE",payload:t})},changeLang:function(e){l({type:"CHANGE_LANG",payload:e})}}},N=n(22),j=n.n(N),S=function(){var e=new j.a({en:{expenseList:"Expense List",addExpense:"Add Expense"},sr:{expenseList:"Lista troskova",addExpense:"Dodaj troskove"}}),t=Object(r.useContext)(i);return t.state&&(e.setLanguage(t.state.lang),console.log("[CURRENT LANG]",e.getLanguage())),l.a.createElement("header",null,l.a.createElement("div",{className:"l-lang"},l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement("span",{onClick:function(){return t.changeLang("en")}},"English")),l.a.createElement("li",null,l.a.createElement("span",null,"|")),l.a.createElement("li",null,l.a.createElement("span",{onClick:function(){return t.changeLang("sr")}},"Srpski")))),l.a.createElement("nav",null,l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement(u.b,{to:"/",exact:!0,activeClassName:"is-active-link"},e.expenseList)),l.a.createElement("li",null,l.a.createElement(u.b,{to:"/add-expense",exact:!0,activeClassName:"is-active-link"},e.addExpense)))))},L=function(){var e=new j.a({en:{selectDate:"Select date 2",month:"month",year:"year",all:"All",may:"May",submit:"submit"},sr:{selectDate:"Filtriraj troskove po datumu:",month:"mesec",year:"godina",all:"Sve",may:"Maj",submit:"potvrdi"}}),t=Object(r.useContext)(i),n=Object(r.useRef)(null),a=Object(r.useRef)(null);t.state&&e.setLanguage(t.state.lang),Object(r.useEffect)((function(){n.current.value=t.state?t.state.month:-1,a.current.value=t.state?t.state.year:-1}),[t.state]);return l.a.createElement(l.a.Fragment,null,l.a.createElement("form",{className:"l-filter",onSubmit:function(e){e.preventDefault(),(-1!==n.current.value||-1!==a.current.value)&&t.filter({month:parseInt(n.current.value),year:parseInt(a.current.value)})}},l.a.createElement("span",null,e.selectDate,": "),l.a.createElement("div",{className:"l-fields"},l.a.createElement("span",null,e.month,":"),l.a.createElement("select",{name:"expenses-month",onChange:function(e){},ref:n,style:{marginRight:"20px"}},l.a.createElement("option",{value:"-1"},e.all),l.a.createElement("option",{value:"0"},"Jan"),l.a.createElement("option",{value:"1"},"Feb"),l.a.createElement("option",{value:"2"},"Mar"),l.a.createElement("option",{value:"3"},"Apr"),l.a.createElement("option",{value:"4"},e.may),l.a.createElement("option",{value:"5"},"Jun"),l.a.createElement("option",{value:"6"},"Jul"),l.a.createElement("option",{value:"7"},"Avg"),l.a.createElement("option",{value:"8"},"Sep"),l.a.createElement("option",{value:"9"},"Okt"),l.a.createElement("option",{value:"10"},"Nov"),l.a.createElement("option",{value:"11"},"Dec")),l.a.createElement("span",null,e.year,":"),l.a.createElement("select",{name:"expenses-year",onChange:function(e){console.log("[onChangeYear]",a.current.value),"-1"===a.current.value&&(n.current.value="-1")},ref:a},l.a.createElement("option",{value:"-1"},e.all),l.a.createElement("option",{value:"2019"},"2019"),l.a.createElement("option",{value:"2020"},"2020"))),l.a.createElement("div",{className:"l-action"},l.a.createElement("button",{type:"submit"},e.submit))))},w=function(e){var t=null;try{t=window.localStorage.getItem(e)}catch(n){return null}return JSON.parse(t)},D=function(e,t){var n=JSON.stringify(t);window.localStorage.setItem(e,n)},P=function(e,t){return new Date(e.date)>new Date(t.date)?-1:1},k=n(61),C=function(e){var t,n=e.expense,a=Object(r.useContext)(i);return l.a.createElement("li",null,l.a.createElement("span",{style:{marginRight:"10px",color:"blue"}},(t=n.date,new Date(t).toLocaleDateString("sr-SR"))),l.a.createElement("span",{style:{marginRight:"10px",color:"red"}},n.price.toFixed(2)),l.a.createElement("span",{style:{marginRight:"10px"}},n.name),l.a.createElement("span",{style:{fontSize:"10px",color:"red",cursor:"pointer"},onClick:function(){return a.remove(n.id)}},l.a.createElement(k.a,null)))},R=function(){var e,t=Object(r.useContext)(i),n=t.state?function(e,t){var n=t.month,a=t.year;return-1===n&&-1===a?e.sort(P):e.filter((function(e){var t=new Date(e.date).getMonth(),r=new Date(e.date).getFullYear();return console.log("[SELECTORS]",t,r),-1===n?a===r:-1===a?n===t:n===t&&a===r})).sort(P)}(t.state.expenses,{month:t.state.month,year:t.state.year}):[];return l.a.createElement(l.a.Fragment,null,l.a.createElement(L,null),l.a.createElement("ul",null,t.state?n.map((function(e,t){return l.a.createElement(C,{key:t,expense:e})})):"Loading ..."),l.a.createElement("div",{className:"l-total"},"Total: ",(e=n,e.reduce((function(e,t){return e+t.price}),0)).toFixed(2)))},_=n(31),A=n.n(_),F=(n(75),n(60));Object(_.registerLocale)("sr",F.a);var I=function(){var e=new j.a({en:{addExpenseName:"add expense name",addExpenseValue:"add expense value",submit:"submit",emptyName:"empty expense name",emptyPrice:"empty expense value"},sr:{addExpenseName:"unesi naziv utroska",addExpenseValue:"unesi potrosenu vrednost",submit:"potvrdi",emptyName:"prazno ime utroska",emptyPrice:"prazna vrednost utroska"}}),t=Object(r.useState)(null),n=Object(m.a)(t,2),a=n[0],c=n[1],o=Object(r.useContext)(i);o.state&&(e.setLanguage(o.state.lang),console.log("[CURRENT LANG]",e.getLanguage()));var u=Object(r.useRef)(null),s=Object(r.useRef)(null),p=Object(r.useState)(new Date),E=Object(m.a)(p,2),d=E[0],v=E[1],f=function(){var e={};return e.id=Math.round(1e6*Math.random()),e.name=s.current.value,e.price=parseInt(u.current.value),e.date=d,e},g=function(){var t={};return""===s.current.value&&(t.emptyName=e.emptyName),""===u.current.value&&(t.emptyPrice=e.emptyPrice),c(t),t};return l.a.createElement("div",{className:"l-add-expense-form"},l.a.createElement("form",{onSubmit:function(e){e.preventDefault();var t=g();if(0===Object.keys(t).length){var n=f();o.add(n),s.current.value="",u.current.value=""}}},l.a.createElement("div",{className:"l-fields"},l.a.createElement("input",{type:"text",name:"expense",ref:s,placeholder:e.addExpenseName}),a&&a.emptyName,l.a.createElement("input",{type:"text",name:"expense",ref:u,placeholder:e.addExpenseValue}),a&&a.emptyPrice),l.a.createElement("div",{className:"l-field"},l.a.createElement(A.a,{locale:"sr",selected:d,onChange:function(e){v(e)}})),l.a.createElement("button",{type:"submit"},e.submit)))},T=function(){return w("react_expenses")},X=function(e){var t=w("react_expenses"),n=t?[].concat(Object(p.a)(t),[e]):[e];return D("react_expenses",n),n},M=function(e){var t=w("react_expenses").filter((function(t){return t.id!==e}));return D("react_expenses",t),t},J=function(){};var G=function(){var e=O(a),t=e.state,n=e.add,r=e.remove,c=e.filter,o=e.changeLang;return l.a.createElement("div",{className:"l-app"},l.a.createElement(i.Provider,{value:{state:t,add:n,remove:r,filter:c,changeLang:o}},l.a.createElement(u.a,null,l.a.createElement(S,null),l.a.createElement(s.c,null,l.a.createElement(s.a,{path:"/",exact:!0,component:R}),l.a.createElement(s.a,{path:"/add-expense",exact:!0,component:I})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(l.a.createElement(G,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},62:function(e,t,n){e.exports=n(120)},67:function(e,t,n){},68:function(e,t,n){}},[[62,1,2]]]);
//# sourceMappingURL=main.ad8c074f.chunk.js.map