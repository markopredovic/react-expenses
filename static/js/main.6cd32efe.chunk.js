(this["webpackJsonpreact-expenses"]=this["webpackJsonpreact-expenses"]||[]).push([[0],{120:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(30),c=a.n(l),o=(a(67),a(29)),u=a(16),s=(a(68),Object(n.createContext)({expenses:[],list:function(){},add:function(){}})),i=a(26),m=a(20),p=a(57);function E(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function d(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?E(a,!0).forEach((function(t){Object(p.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):E(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var v={expenses:[],month:-1,year:(new Date).getFullYear(),lang:"sr"},f=function(e,t){return d({},e,{expenses:[].concat(Object(i.a)(e.expenses),Object(i.a)(t.payload)),month:-1,year:(new Date).getFullYear()})},g=function(e,t){return d({},e,{expenses:[].concat(Object(i.a)(e.expenses),[t])})},y=function(e,t){return console.log("[FILTER]",t),d({},e,{expenses:t.updatedExpenses,month:t.filter.month,year:t.filter.year})},x=function(e,t){var a=e.expenses.filter((function(e){return e.id!==t}));return d({},e,{expenses:a})},b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LIST_ALL_EXPENSES":return f(e,t);case"ADD_EXPENSE":return g(e,t.payload);case"FILTER_EXPENSES":return y(e,t.payload);case"REMOVE_EXPENSE":return x(e,t.payload);case"CHANGE_LANG":return d({},e,{lang:t.payload});default:return console.log(e),e}},h=function(e){return e?e.expenses.filter((function(t){return new Date(t.date).getMonth()===e.month})).reduce((function(e,t){return e+t.price}),0):-1},O=function(e){var t=null;try{t=window.localStorage.getItem(e)}catch(a){return null}return JSON.parse(t)},N=function(e,t){var a=JSON.stringify(t);window.localStorage.setItem(e,a)},S=function(e,t){return new Date(e.date)>new Date(t.date)?-1:1},j=function(e){console.log("[USE EXPENSES]");var t=Object(n.useReducer)(b),a=Object(m.a)(t,2),r=a[0],l=a[1];Object(n.useEffect)((function(){c()}),[]);var c=function(){var t=O(e).sort(S);t&&l({type:"LIST_ALL_EXPENSES",payload:t})},o=function(t){var a=O(e),n=a?[].concat(Object(i.a)(a),[t]):[t];return N(e,n),n},u=function(t){var a=O(e).filter((function(e){return e.id!==t}));return console.log("[REMOVE EXPENSES hook]",a),N(e,a),a};return{state:r,total:h(),list:c,add:function(e){try{o(e)}catch(t){}l({type:"ADD_EXPENSE",payload:e})},filter:function(t){var a=O(e);console.log("[FILTER EXPENSES]",a);var n=a;-1!==t.month&&-1!==t.year&&(n=a.filter((function(e){return new Date(e.date).getMonth()===t.month&&new Date(e.date).getFullYear()===t.year})).sort(S)),l({type:"FILTER_EXPENSES",payload:{updatedExpenses:n,filter:t}})},remove:function(e){u(e),l({type:"REMOVE_EXPENSE",payload:e})},changeLang:function(e){l({type:"CHANGE_LANG",payload:e})}}},L=a(23),w=a.n(L),D=function(){var e=new w.a({en:{expenseList:"Expense List",addExpense:"Add Expense"},sr:{expenseList:"Lista troskova",addExpense:"Dodaj troskove"}}),t=Object(n.useContext)(s);return t.state&&(e.setLanguage(t.state.lang),console.log("[CURRENT LANG]",e.getLanguage())),r.a.createElement("header",null,r.a.createElement("div",{className:"l-lang"},r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("span",{onClick:function(){return t.changeLang("en")}},"English")),r.a.createElement("li",null,r.a.createElement("span",null,"|")),r.a.createElement("li",null,r.a.createElement("span",{onClick:function(){return t.changeLang("sr")}},"Srpski")))),r.a.createElement("nav",null,r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(o.b,{to:"/",exact:!0,activeClassName:"is-active-link"},e.expenseList)),r.a.createElement("li",null,r.a.createElement(o.b,{to:"/add-expense",exact:!0,activeClassName:"is-active-link"},e.addExpense)))))},P=function(){var e=new w.a({en:{selectDate:"Select date 2",month:"month",year:"year",all:"All",may:"May",submit:"submit"},sr:{selectDate:"Izaberi datum",month:"mesec",year:"godina",all:"Sve",may:"Maj",submit:"potvrdi"}}),t=Object(n.useContext)(s),a=Object(n.useState)(!0),l=Object(m.a)(a,2),c=l[0],o=l[1],u=Object(n.useRef)(null),i=Object(n.useRef)(null);t.state&&(e.setLanguage(t.state.lang),console.log("[CURRENT LANG]",e.getLanguage())),Object(n.useEffect)((function(){console.log("[USE EFFECT filter]"),u.current.value=t.state?t.state.month:-1,i.current.value=t.state?t.state.year:-1}),[t.state]);return r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{className:"l-filter",onSubmit:function(e){e.preventDefault(),t.filter({month:parseInt(u.current.value),year:parseInt(i.current.value)})}},r.a.createElement("span",null,e.selectDate,": "),r.a.createElement("div",{className:"l-fields"},r.a.createElement("span",null,e.month,":"),r.a.createElement("select",{name:"expenses-month",onChange:function(e){-1!==parseInt(u.current.value)?o(!1):o(!0),"-1"!==u.current.value&&(i.current.value=(new Date).getFullYear())},ref:u,style:{marginRight:"20px"}},r.a.createElement("option",{value:"-1"},e.all),r.a.createElement("option",{value:"0"},"Jan"),r.a.createElement("option",{value:"1"},"Feb"),r.a.createElement("option",{value:"2"},"Mar"),r.a.createElement("option",{value:"3"},"Apr"),r.a.createElement("option",{value:"4"},e.may),r.a.createElement("option",{value:"5"},"Jun"),r.a.createElement("option",{value:"6"},"Jul"),r.a.createElement("option",{value:"7"},"Avg"),r.a.createElement("option",{value:"8"},"Sep"),r.a.createElement("option",{value:"9"},"Okt"),r.a.createElement("option",{value:"10"},"Nov"),r.a.createElement("option",{value:"11"},"Dec")),r.a.createElement("span",null,e.year,":"),r.a.createElement("select",{name:"expenses-year",onChange:function(e){console.log("[onChangeYear]",i.current.value),"-1"===i.current.value&&(u.current.value="-1")},ref:i,disabled:c},r.a.createElement("option",{value:"-1"},"All"),r.a.createElement("option",{value:"2019"},"2019"),r.a.createElement("option",{value:"2020"},"2020"))),r.a.createElement("div",{className:"l-action"},r.a.createElement("button",{type:"submit"},e.submit))))},R=a(61),C=function(e){var t,a=e.expense,l=Object(n.useContext)(s);return r.a.createElement("li",null,r.a.createElement("span",{style:{marginRight:"10px",color:"blue"}},(t=a.date,new Date(t).toLocaleDateString("sr-SR"))),r.a.createElement("span",{style:{marginRight:"10px",color:"red"}},a.price.toFixed(2)),r.a.createElement("span",{style:{marginRight:"10px"}},a.name),r.a.createElement("span",{style:{fontSize:"10px",color:"red",cursor:"pointer"},onClick:function(){return l.remove(a.id)}},r.a.createElement(R.a,null)))},k=function(){var e=Object(n.useContext)(s);return r.a.createElement(r.a.Fragment,null,r.a.createElement(P,null),r.a.createElement("ul",null,e.state?e.state.expenses.map((function(e,t){return r.a.createElement(C,{key:t,expense:e})})):"Loading ..."))},A=a(31),F=a.n(A),I=(a(75),a(60));Object(A.registerLocale)("sr",I.a);var _=function(){var e=new w.a({en:{addExpenseName:"add expense name",addExpenseValue:"add expense value",submit:"submit",emptyName:"empty expense name",emptyPrice:"empty expense value"},sr:{addExpenseName:"unesi naziv utroska",addExpenseValue:"unesi potrosenu vrednost",submit:"potvrdi",emptyName:"prazno ime utroska",emptyPrice:"prazna vrednost utroska"}}),t=Object(n.useState)(null),a=Object(m.a)(t,2),l=a[0],c=a[1],o=Object(n.useContext)(s);o.state&&(e.setLanguage(o.state.lang),console.log("[CURRENT LANG]",e.getLanguage()));var u=Object(n.useRef)(null),i=Object(n.useRef)(null),p=Object(n.useState)(new Date),E=Object(m.a)(p,2),d=E[0],v=E[1],f=function(){var e={};return e.id=Math.round(1e6*Math.random()),e.name=i.current.value,e.price=parseInt(u.current.value),e.date=d,e},g=function(){var t={};return""===i.current.value&&(t.emptyName=e.emptyName),""===u.current.value&&(t.emptyPrice=e.emptyPrice),c(t),t};return r.a.createElement("div",{className:"l-add-expense-form"},r.a.createElement("form",{onSubmit:function(e){e.preventDefault();var t=g();if(0===Object.keys(t).length){var a=f();o.add(a),i.current.value="",u.current.value=""}}},r.a.createElement("div",{className:"l-fields"},r.a.createElement("input",{type:"text",name:"expense",ref:i,placeholder:e.addExpenseName}),l&&l.emptyName,r.a.createElement("input",{type:"text",name:"expense",ref:u,placeholder:e.addExpenseValue}),l&&l.emptyPrice),r.a.createElement("div",{className:"l-field"},r.a.createElement(F.a,{locale:"sr",selected:d,onChange:function(e){v(e)}})),r.a.createElement("button",{type:"submit"},e.submit)))};var X=function(){var e=j("react_expenses"),t=e.state,a=e.filteredList,n=e.total,l=e.add,c=e.filter,i=e.remove,m=e.changeLang;return r.a.createElement("div",{className:"l-app"},r.a.createElement(s.Provider,{value:{state:t,filteredList:a,total:n,add:l,filter:c,remove:i,changeLang:m}},r.a.createElement(o.a,null,r.a.createElement(D,null),r.a.createElement(u.c,null,r.a.createElement(u.a,{path:"/",exact:!0,component:k}),r.a.createElement(u.a,{path:"/add-expense",exact:!0,component:_})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(X,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},62:function(e,t,a){e.exports=a(120)},67:function(e,t,a){},68:function(e,t,a){}},[[62,1,2]]]);
//# sourceMappingURL=main.6cd32efe.chunk.js.map